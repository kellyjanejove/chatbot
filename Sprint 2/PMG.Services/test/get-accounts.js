'use strict';

// tests for get-accounts
// Generated by serverless-mocha-plugin
const dataInitializer = require('./initializers/accountInitializer.js');
const mod = require('../account/get-accounts.js');
const mochaPlugin = require('serverless-mocha-plugin');

const lambdaWrapper = mochaPlugin.lambdaWrapper;
const expect = mochaPlugin.chai.expect;
const wrapped = lambdaWrapper.wrap(mod, { handler: 'handler' });

describe('get-accounts', () => {
  var accountList = [];
  before((done) => {
//  lambdaWrapper.init(liveFunction); // Rmochaun the deployed lambda
dataInitializer.seed().then(function (account) {
  accountList = account;
done();
    });
  });

  it('implement tests here', () => {
    return wrapped.run({
      pathParameters: {
        id: accountList[0].accountId
      }
    }).then((response) => {
     let results = JSON.parse(response.body);
     expect(response[0].name).to.be.equal(accountList[0].name);
  
    });
  });
});
